import{c as i,o,a as t,t as l,b as v,w as g,d as u,_ as h,e as D,r,u as j,f as F,g as N,h as V,i as B,j as S,F as L,k as R,l as T,m as $,n as z,p as Q,q as U}from"./index-dBXG20DD.js";const H={class:"w-full bg-white"},M={class:"mx-auto flex max-w-5xl flex-col items-center px-4 py-12 sm:px-6 md:flex-row lg:px-8"},O={class:"w-full flex-shrink-0 md:w-1/3"},G=["src","alt"],J={class:"mt-8 w-full md:mt-0 md:w-2/3 md:pl-10"},K={class:"mb-4 text-3xl font-bold text-gray-900 md:text-4xl"},W={class:"space-y-3 text-lg text-gray-700"},X={class:"flex items-start"},Y={class:"flex items-start"},Z={class:"flex items-start"},tt={class:"flex justify-end items-center"},et={class:"text-xl font-semibold text-[#F2994A] mt-5"},st={__name:"RegisterBanner",props:{event:{type:Object,required:!0}},emits:["request-payment"],setup(d,{emit:n}){const x=n;return(b,s)=>(o(),i("section",H,[t("div",M,[t("div",O,[t("img",{src:d.event.imageUrl,alt:d.event.imageAlt,class:"w-full rounded-lg object-cover shadow-lg"},null,8,G)]),t("div",J,[t("h1",K,l(d.event.title),1),t("div",W,[t("p",X,[s[1]||(s[1]=t("strong",{class:"inline-block w-24 flex-shrink-0 font-semibold text-gray-900"},"活動時間",-1)),t("span",null,l(d.event.time),1)]),t("p",Y,[s[2]||(s[2]=t("strong",{class:"inline-block w-24 flex-shrink-0 font-semibold text-gray-900"},"活動地點",-1)),t("span",null,l(d.event.location),1)]),t("p",Z,[s[3]||(s[3]=t("strong",{class:"inline-block w-24 flex-shrink-0 font-semibold text-gray-900"},"主辦單位",-1)),t("span",null,l(d.event.organizer),1)])]),t("div",tt,[t("span",et,"尚餘 "+l(d.event.spotsLeft)+" 個名額",1),v(h,{variant:"primary",onClick:s[0]||(s[0]=p=>x("request-payment")),width:"150px",height:"50px","font-size":"20px",class:"mr-18 ml-5 mt-5 md:w-1/4"},{default:g(()=>s[4]||(s[4]=[u(" 立刻報名 ",-1)])),_:1,__:[4]})])])])]))}},at={class:"bg-[#282828] text-gray-200 font-sans"},lt={key:0,class:"text-center py-40"},ot={key:1,class:"text-center py-40"},nt={class:"text-xl text-red-400"},it={key:2},dt={class:"mx-auto px-6 pb-12"},ct={class:"max-w-4xl mx-auto mt-32 space-y-16"},rt={class:"space-y-4 text-gray-300 leading-relaxed whitespace-pre-line"},ut={class:"space-y-6 text-gray-300"},vt={class:"bg-white text-gray-800 p-6 rounded-lg shadow-lg"},xt={class:"flex flex-nowrap justify-around items-center space-x-4"},bt={class:"flex-1 md:text-center"},pt={class:"flex flex-col items-center"},mt={class:"text-xl font-bold mt-2"},ft={class:"flex-1 md:text-center"},gt={class:"flex flex-col items-center"},ht={class:"flex items-center justify-center mt-2 space-x-4"},_t=["disabled"],yt={class:"text-xl font-bold"},wt={class:"flex-1 md:text-center"},kt={class:"flex flex-col items-center"},$t={class:"text-xl font-bold mt-2 text-[#F2994A]"},Et={class:"flex justify-center items-center"},At={class:"mt-20"},Ct={key:0,class:"text-center text-gray-400"},It={key:1,class:"text-center text-red-400"},Pt={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},qt={key:3,class:"text-center text-gray-500"},Dt={__name:"EventDetail",setup(d){const n=r(null),x=r(!0),b=r(null),s=r([]),p=r(!0),m=r(null),E=j(),_=z(),f=E.params.id;async function y(){x.value=!0,b.value=null;try{const a=`http://localhost:8888/ChopHub-backend/api/getEventById.php?id=${f}`;console.log("正在請求詳情API:",a);const e=await $.get(a);console.log("詳情API成功回應",e.data),n.value=e.data.data||e.data}catch(a){console.error("詳情 API 請求失敗:",a),b.value="無法載入活動詳情，請稍後再試。"}finally{x.value=!1}}async function A(){p.value=!0,m.value=null;try{const a=`http://localhost:8888/ChopHub-back-end/api/getSuggestedEvents.php?limit=3&excludeId=${f}`;console.log("正在請求推薦活動 API:",a);const e=await $.get(a);console.log("推薦活動 API 成功回應:",e.data),s.value=e.data.data||e.data}catch(a){console.error("推薦活動 API 請求失敗:",a),m.value="無法載入推薦活動，請稍後再試。"}finally{p.value=!1}}F(()=>{Promise.all([y(),A()])});const c=r(1),C=()=>{c.value++},I=()=>{c.value>1&&c.value--},P=N(()=>n.value?.price?n.value.price*c.value:0);function q(a){console.log(`查看 ID 為 ${a} 的活動詳情。`),_.push({name:"event-detail",params:{id:a}}),window.location.reload()}function w(){_.push({path:"/EventPayment",query:{eventId:f,quantity:c.value}})}return(a,e)=>(o(),i("div",at,[v(B),x.value?(o(),i("div",lt,e[0]||(e[0]=[t("p",{class:"text-xl text-gray-400"},"活動詳情載入中，請稍候...",-1)]))):b.value?(o(),i("div",ot,[t("p",nt,"錯誤："+l(b.value),1),v(h,{variant:"primary",onClick:y,class:"mt-4"},{default:g(()=>e[1]||(e[1]=[u(" 重試 ",-1)])),_:1,__:[1]})])):n.value?(o(),i("div",it,[v(st,{event:n.value,onRequestPayment:w},null,8,["event"]),t("main",dt,[t("div",ct,[t("section",null,[e[2]||(e[2]=t("h3",{class:"font-bold text-white mb-6 pb-3 border-b border-gray-500"},[t("span",{class:"text-gray-500 mr-2"},"|"),u("活動介紹")],-1)),t("div",rt,[t("p",null,l(n.value.description||"暫無詳細介紹。"),1)])]),t("section",null,[e[5]||(e[5]=t("h3",{class:"font-bold text-white mb-6 pb-3 border-b border-gray-500"},[t("span",{class:"text-gray-500 mr-2"},"|"),u("報名辦法")],-1)),t("div",ut,[t("div",null,[e[3]||(e[3]=t("h3",{class:"font-bold text-white mb-2"},[t("span",{class:"text-[#F2994A] mr-2"},"|"),u("報名費用")],-1)),t("p",null,"新台幣 "+l(n.value.price)+" 元整。",1)]),e[4]||(e[4]=t("div",null,[t("h3",{class:"font-bold text-white mb-2"},[t("span",{class:"text-[#F2994A] mr-2"},"|"),u("年齡限制")]),t("p",null,"限年滿 18 歲以上之民眾參加，現場需出示證件。")],-1))])]),e[10]||(e[10]=S('<section data-v-7c1bb373><h3 class="font-bold text-white mb-6 pb-3 border-b border-gray-500" data-v-7c1bb373>活動時程規劃</h3><div class="space-y-2 text-gray-300" data-v-7c1bb373><div class="text-white" data-v-7c1bb373><span class="font-mono text-white" data-v-7c1bb373>18:50-19:00 |</span> 報到與集合</div><p data-v-7c1bb373><span class="font-mono text-white" data-v-7c1bb373>19:00-19:10 |</span> 活動開場 &amp; 導覽流程說明</p><p data-v-7c1bb373><span class="font-mono text-white" data-v-7c1bb373>19:10-19:45 |</span> 專家深度導覽：限定展品與私藏珍品</p><p data-v-7c1bb373><span class="font-mono text-white" data-v-7c1bb373>19:45-20:00 |</span> Q&amp;A 與自由欣賞時間</p></div></section><section data-v-7c1bb373><h3 class="font-bold text-white mb-6 pb-3 border-b border-gray-500" data-v-7c1bb373>聯絡我們</h3><div class="text-gray-300 space-y-2" data-v-7c1bb373><p data-v-7c1bb373>如有任何關於活動內容、報名流程或特殊需求的疑問，歡迎與主辦單位聯繫，我們將誠摯為您解答：</p><br data-v-7c1bb373><p data-v-7c1bb373>主辦單位 | 鋼火典藏會 SteelFire Collectors Circle</p><p data-v-7c1bb373>Email: events@steelfire-collectors.com</p><p data-v-7c1bb373>電話: 02-9876-5432 #536</p><p data-v-7c1bb373>聯絡人: 林先生</p></div></section>',2)),t("section",vt,[t("div",xt,[t("div",bt,[t("div",pt,[e[6]||(e[6]=t("h4",{class:"font-bold"},"票價",-1)),t("h5",mt,"NT$ "+l(n.value.price),1)])]),t("div",ft,[t("div",gt,[e[7]||(e[7]=t("h4",{class:"font-bold"},"張數",-1)),t("div",ht,[t("button",{onClick:I,disabled:c.value<=1,class:"bg-gray-200 w-8 h-8 rounded-full font-bold text-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed"},"-",8,_t),t("span",yt,l(c.value),1),t("button",{onClick:C,class:"bg-gray-200 w-8 h-8 rounded-full font-bold text-lg hover:bg-gray-300"},"+")])])]),t("div",wt,[t("div",kt,[e[8]||(e[8]=t("h4",{class:"font-bold"},"總金額",-1)),t("h5",$t,"NT$ "+l(P.value.toLocaleString()),1)])])])]),t("div",Et,[v(h,{variant:"primary",onClick:w,width:"150px",height:"50px","font-size":"20px"},{default:g(()=>e[9]||(e[9]=[u(" 立刻報名 ",-1)])),_:1,__:[9]})])]),t("section",At,[e[11]||(e[11]=t("h3",{class:"font-bold text-white text-center mb-10"},"你可能會有興趣的活動",-1)),p.value?(o(),i("div",Ct," 正在載入推薦活動... ")):m.value?(o(),i("div",It,l(m.value),1)):s.value&&s.value.length>0?(o(),i("div",Pt,[(o(!0),i(L,null,R(s.value,k=>(o(),Q(U,{key:k.id,event:k,onViewDetails:q},null,8,["event"]))),128))])):(o(),i("div",qt," 目前沒有其他推薦活動。 "))])])])):V("",!0),v(T)]))}},Ft=D(Dt,[["__scopeId","data-v-7c1bb373"]]);export{Ft as default};
