import{c as i,o as n,a as t,t as a,b as f,w as h,d as v,_ as y,e as F,r as u,f as N,g as V,u as B,h as S,i as A,j as T,k as L,F as P,l as R,m as z,n as E,p as Q,q as U}from"./index-qO9q628Y.js";import{_ as I}from"./EventInfoCard-CDltz5Aj.js";const M={class:"w-full bg-white"},O={class:"mx-auto flex max-w-5xl flex-col items-center px-4 py-12 sm:px-6 md:flex-row lg:px-8"},G={class:"w-full flex-shrink-0 md:w-1/3"},H=["src","alt"],J={class:"mt-8 w-full md:mt-0 md:w-2/3 md:pl-10"},K={class:"mb-4 text-3xl font-bold text-gray-900 md:text-4xl"},W={class:"space-y-3 text-lg text-gray-700"},X={class:"flex items-start"},Y={class:"flex items-start"},Z={class:"flex items-start"},tt={class:"flex justify-end items-center"},et={class:"text-xl font-semibold text-[#F2994A] mt-5"},st={__name:"RegisterBanner",props:{event:{type:Object,required:!0}},emits:["request-payment"],setup(d,{emit:o}){const x=o;return(p,s)=>(n(),i("section",M,[t("div",O,[t("div",G,[t("img",{src:d.event.imageUrl,alt:d.event.title,class:"w-full rounded-lg object-cover shadow-lg"},null,8,H)]),t("div",J,[t("h1",K,a(d.event.title),1),t("div",W,[t("p",X,[s[1]||(s[1]=t("strong",{class:"inline-block w-24 flex-shrink-0 font-semibold text-gray-900"},"活動時間",-1)),t("span",null,a(d.event.time),1)]),t("p",Y,[s[2]||(s[2]=t("strong",{class:"inline-block w-24 flex-shrink-0 font-semibold text-gray-900"},"活動地點",-1)),t("span",null,a(d.event.location),1)]),t("p",Z,[s[3]||(s[3]=t("strong",{class:"inline-block w-24 flex-shrink-0 font-semibold text-gray-900"},"主辦單位",-1)),t("span",null,a(d.event.organizer),1)])]),t("div",tt,[t("span",et,"尚餘 "+a(d.event.spotsLeft)+" 個名額",1),f(y,{variant:"primary",onClick:s[0]||(s[0]=m=>x("request-payment")),width:"150px",height:"50px","font-size":"20px",class:"mr-18 ml-5 mt-5 md:w-1/4"},{default:h(()=>s[4]||(s[4]=[v(" 立刻報名 ",-1)])),_:1,__:[4]})])])])]))}},at={class:"bg-[#282828] text-gray-200 font-sans"},lt={key:0,class:"text-center py-40"},nt={key:1,class:"text-center py-40"},ot={class:"text-xl text-red-400"},it={key:2},dt={class:"mx-auto px-6 pb-12"},rt={class:"max-w-4xl mx-auto mt-32 space-y-16"},ct={class:"space-y-4 text-gray-300 leading-relaxed whitespace-pre-line"},ut={class:"space-y-6 text-gray-300"},vt={class:"bg-white text-gray-800 p-6 rounded-lg shadow-lg"},ft={class:"flex flex-nowrap justify-around items-center space-x-4"},xt={class:"flex-1 md:text-center"},pt={class:"flex flex-col items-center"},mt={class:"text-xl font-bold mt-2"},bt={class:"flex-1 md:text-center"},gt={class:"flex flex-col items-center"},_t={class:"flex items-center justify-center mt-2 space-x-4"},ht=["disabled"],yt={class:"text-xl font-bold"},wt={class:"flex-1 md:text-center"},kt={class:"flex flex-col items-center"},$t={class:"text-xl font-bold mt-2 text-[#F2994A]"},Et={class:"flex justify-center items-center"},jt={class:"mt-20"},Ct={key:0,class:"text-center text-gray-400"},qt={key:1,class:"text-center text-red-400"},Dt={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},Ft={key:3,class:"text-center text-gray-500"},Nt={__name:"EventDetail",setup(d){const o=u(null),x=u(!0),p=u(null),s=u([]),m=u(!0),b=u(null),g=B(),w=Q();async function _(l){x.value=!0,p.value=null;try{const e=`https://tibamef2e.com/cjd101/g3/api/events/getEventById.php?id=${l}`,r=await E.get(e);o.value=r.data.data||r.data}catch{p.value="無法載入活動詳情，請稍後再試。"}finally{x.value=!1}}async function k(l){m.value=!0,b.value=null;try{const e=`https://tibamef2e.com/cjd101/g3/api/events/getSuggestedEvents.php?limit=3&excludeId=${l}`,r=await E.get(e);s.value=r.data.data||r.data}catch{b.value="無法載入推薦活動，請稍後再試。"}finally{m.value=!1}}N(()=>g.params.id,(l,e)=>{l&&l!==e&&(_(l),k(l),window.scrollTo(0,0))}),V(()=>{_(g.params.id),k(g.params.id)});const c=u(1),j=()=>{c.value++},C=()=>{c.value>1&&c.value--},q=S(()=>o.value?.price?o.value.price*c.value:0);function D(l){w.push({name:"event-detail",params:{id:l}})}function $(){w.push({path:"/EventPayment",query:{eventId:g.params.id,quantity:c.value}})}return(l,e)=>(n(),i("div",at,[f(T),x.value?(n(),i("div",lt,e[0]||(e[0]=[t("p",{class:"text-xl text-gray-400"},"活動詳情載入中，請稍候...",-1)]))):p.value?(n(),i("div",nt,[t("p",ot,"錯誤："+a(p.value),1),f(y,{variant:"primary",onClick:_,class:"mt-4"},{default:h(()=>e[1]||(e[1]=[v(" 重試 ",-1)])),_:1,__:[1]})])):o.value?(n(),i("div",it,[f(st,{event:o.value,onRequestPayment:$},null,8,["event"]),t("main",dt,[t("div",rt,[t("section",null,[e[2]||(e[2]=t("h3",{class:"font-bold text-white mb-6 pb-3 border-b border-gray-500"},[t("span",{class:"text-gray-500 mr-2"},"|"),v("活動介紹")],-1)),t("div",ct,[t("p",null,a(o.value.description||"暫無詳細介紹。"),1)])]),t("section",null,[e[5]||(e[5]=t("h3",{class:"font-bold text-white mb-6 pb-3 border-b border-gray-500"},[t("span",{class:"text-gray-500 mr-2"},"|"),v("報名辦法")],-1)),t("div",ut,[t("div",null,[e[3]||(e[3]=t("h3",{class:"font-bold text-white mb-2"},[t("span",{class:"text-[#F2994A] mr-2"},"|"),v("報名費用")],-1)),t("p",null,"新台幣 "+a(o.value.price)+" 元整。",1)]),e[4]||(e[4]=t("div",null,[t("h3",{class:"font-bold text-white mb-2"},[t("span",{class:"text-[#F2994A] mr-2"},"|"),v("年齡限制")]),t("p",null,"限年滿 18 歲以上之民眾參加，現場需出示證件。")],-1))])]),e[10]||(e[10]=L('<section data-v-bf2a8952><h3 class="font-bold text-white mb-6 pb-3 border-b border-gray-500" data-v-bf2a8952>活動時程規劃</h3><div class="space-y-2 text-gray-300" data-v-bf2a8952><div class="text-white" data-v-bf2a8952><span class="font-mono text-white" data-v-bf2a8952>18:50-19:00 |</span> 報到與集合</div><p data-v-bf2a8952><span class="font-mono text-white" data-v-bf2a8952>19:00-19:10 |</span> 活動開場 &amp; 導覽流程說明</p><p data-v-bf2a8952><span class="font-mono text-white" data-v-bf2a8952>19:10-19:45 |</span> 專家深度導覽：限定展品與私藏珍品</p><p data-v-bf2a8952><span class="font-mono text-white" data-v-bf2a8952>19:45-20:00 |</span> Q&amp;A 與自由欣賞時間</p></div></section><section data-v-bf2a8952><h3 class="font-bold text-white mb-6 pb-3 border-b border-gray-500" data-v-bf2a8952>聯絡我們</h3><div class="text-gray-300 space-y-2" data-v-bf2a8952><p data-v-bf2a8952>如有任何關於活動內容、報名流程或特殊需求的疑問，歡迎與主辦單位聯繫，我們將誠摯為您解答：</p><br data-v-bf2a8952><p data-v-bf2a8952>主辦單位 | 鋼火典藏會 SteelFire Collectors Circle</p><p data-v-bf2a8952>Email: events@steelfire-collectors.com</p><p data-v-bf2a8952>電話: 02-9876-5432 #536</p><p data-v-bf2a8952>聯絡人: 林先生</p></div></section>',2)),t("section",vt,[t("div",ft,[t("div",xt,[t("div",pt,[e[6]||(e[6]=t("h4",{class:"font-bold"},"票價",-1)),t("h5",mt,"NT$ "+a(o.value.price),1)])]),t("div",bt,[t("div",gt,[e[7]||(e[7]=t("h4",{class:"font-bold"},"張數",-1)),t("div",_t,[t("button",{onClick:C,disabled:c.value<=1,class:"bg-gray-200 w-8 h-8 rounded-full font-bold text-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed"},"-",8,ht),t("span",yt,a(c.value),1),t("button",{onClick:j,class:"bg-gray-200 w-8 h-8 rounded-full font-bold text-lg hover:bg-gray-300"},"+")])])]),t("div",wt,[t("div",kt,[e[8]||(e[8]=t("h4",{class:"font-bold"},"總金額",-1)),t("h5",$t,"NT$ "+a(q.value.toLocaleString()),1)])])])]),t("div",Et,[f(y,{variant:"primary",onClick:$,width:"150px",height:"50px","font-size":"20px"},{default:h(()=>e[9]||(e[9]=[v(" 立刻報名 ",-1)])),_:1,__:[9]})])]),t("section",jt,[e[11]||(e[11]=t("h3",{class:"font-bold text-white text-center mb-10"},"你可能會有興趣的活動",-1)),m.value?(n(),i("div",Ct," 正在載入推薦活動... ")):b.value?(n(),i("div",qt,a(b.value),1)):s.value&&s.value.length>0?(n(),i("div",Dt,[(n(!0),i(P,null,R(s.value,r=>(n(),U(I,{key:r.id,event:r,onViewDetails:D},null,8,["event"]))),128))])):(n(),i("div",Ft," 目前沒有其他推薦活動。 "))])])])):A("",!0),f(z)]))}},St=F(Nt,[["__scopeId","data-v-bf2a8952"]]);export{St as default};
